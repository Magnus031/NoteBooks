# <center>基于RPC项目</center>
项目地址 : https://github.com/Magnus031/TryRPC


## 场景题
### 如果服务宕机了，对方应该怎么处理？
> 这里就要强调一下一个概念为容错策略。我们在设计RPC框架的时候，就要考虑到这个问题。如果服务宕机了，我们应该怎么处理。这里有几种策略:

1. `Fail-Over` 故障转移，在一次失败的调用之后，因为对于服务端分布式来说，是具有多个提供相同服务的节点的，所以我们就选择可以切换到下一个提供相同的服务的节点上来进行调用。算是一次重试。

2. `Fail-Back` 失败自动恢复，系统的某个功能出现调用失败或者错误的时候，可以通过其他方法来恢复该功能的正常，比如重试/调用其他服务。

3. `Fail-Safe` 静默处理，就是在调用失败的时候，我们可以选择直接返回一个默认值，或者是抛出一个异常。

4. `Fail-Fast` 快速失败，就是在调用失败的时候，我们可以选择直接抛出一个异常，不做任何处理。



### 在调用过程中发生了网络异常，如何保证消息的可达性？

> 这里就要强调一下一个概念为消息可靠性。我们在设计RPC框架的时候，就要考虑到这个问题。如果在调用过程中发生了网络异常，我们应该怎么处理。这里有几种策略:

1. `重试机制` 在调用失败的时候，我们可以选择重试，直到成功为止。这个是最常见的一种策略。当然，我们会选择指数退避，避免过多的请求对服务端造成压力。

2. `消息确认` 在调用失败的时候，我们可以选择发送一个确认消息，来确认消息是否发送成功。这个是一种消息可靠性的保证。

3. `异步消息队列` 将请求异步放入消息队列，服务端异步处理，避免实时调用受网络问题影响。

4. `幂等性` 为每一次请求生成一个唯一的ID，保证每一次请求的幂等性。这样就可以避免重复请求的问题。

5. `服务降级/熔断机制` 

    服务降级: 在网络异常或者服务不可用的时候，返回默认值或者提示用户稍后重试

    熔断机制: 检测到多次调用失败之后，短时间内不能再发送请求，保护系统资源



### 请求量突增，导致服务无法及时处理，有哪些应对措施？

1. `负载均衡` 通过请求分发到多个服务器或者服务实例，避免单个服务过载

2. `水平拓展` 通过增加更多的服务实例来提高系统的处理能力

3. `限流` 通过限制请求的数量，避免服务过载

4. `缓存` 通过缓存来减轻服务的压力

